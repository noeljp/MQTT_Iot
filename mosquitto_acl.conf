# Mosquitto ACL (Access Control List) pour APRU40 IoT Platform
# Format: topic [read|write|readwrite] <topic>
# Les patterns utilisent + pour un niveau et # pour plusieurs niveaux

# Utilisateur admin - Accès complet
user admin
topic readwrite #

# Utilisateur backend - Lecture et écriture sur les topics apru40
user backend
topic readwrite apru40/#
topic read test/#

# Utilisateurs gateways - Peuvent publier leurs données et statuts
user gateway01
topic write apru40/gateway01/+
topic write apru40/gateway01/alert/#
topic read apru40/gateway01/config/#

user gateway02
topic write apru40/gateway02/+
topic write apru40/gateway02/alert/#
topic read apru40/gateway02/config/#

# Utilisateur node - Lecture seulement pour monitoring
user monitor
topic read apru40/#
topic read test/#

# Pattern général pour les nouveaux gateways
# Chaque gateway peut seulement publier sur ses propres topics
# Pattern: apru40/<gateway_id>/...
